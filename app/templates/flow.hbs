<h3 id='title'>{{content.name}}</h3>

<div>{{content.description}}</div>

{{#ui-accordion class="styled"}}
  <div class="active title">
    <i class="dropdown icon"></i>
    Steps
  </div>
  <div class="active content">
    <div class="ui divided list">
      {{#each content.steps as |step|}}
      <div class="item">
        <div class="content">
          <a class="header">{{step.name}}</a>
          <div class="description">{{step.description}}</div>
          <div class="description">{{step.type}}</div>
          <div class="ui bulleted list">
          {{#each step.endpoints as |endpoint|}}
            <div class="item">
              <div class="content">
                <a class="header">{{endpoint.name}}</a>
                <a class="description">{{endpoint.description}}</a>
                <div class="item">
                  <div class="item">
                    {{endpoint.target}}
                  </div>
                  {{#if endpoint.isIn}}
                    <i class="arrow left icon"></i>
                  {{/if}}
                  {{#if endpoint.isOut}}
                    <i class="arrow right icon"></i>
                  {{/if}}
                  <div class="ui label">
                    {{#if endpoint.mandatory}}
                      <i class="asterisk icon"/>
                    {{/if}}
                    {{endpoint.uti}}
                  </div>
                </div>
              </div>
            </div>
          {{/each}}
          </div>
        </div>
      </div>
      {{/each}}
    </div>
  </div>
  <div class="title">
    <i class="dropdown icon"></i>
    Endpoints
  </div>
  <div class="content">
    <svg xmlns="http://www.w3.org/2000/svg"
      version="1.0"
      baseProfile="full"
      viewBox="126 113 964 503"
      preserveAspectRatio="xMidYMid"
      width="100%" height="100%">
      <defs id="defs1">
        <marker orient="auto" refX="7.5" refY="0" id="ConnArrowEnd" style="overflow:visible">
          <path d="M 0,0 L 1,-5 L -12.5,0 L 1,5 L 0,0 z"
            style="fill-rule:evenodd;stroke:#000000;stroke-width:1px;marker-start:none"
            transform="scale(-0.6,-0.6)"/>
        </marker>
      </defs>
      <path
         class="cluster"
         d="M 397,118 L 397,118 L 449,118 L 455,118 L 460,121 L 465,126 L 468,131 L 518,293 L 519,297 L 521,377 L 521,495 L 520,498 L 518,502 L 516,504 L 512,506 L 464,525 L 458,526 L 204,526 L 197,525 L 192,522 L 187,517 L 184,512 L 142,427 L 142,424 L 142,383 L 142,379 L 165,239 L 184,165 L 390,118 L 397,118"/>

    {{#each content.steps as |step|}}
      <rect width={{step.w}} height={{step.h}} x={{step.x}} y={{step.y}} rx="9" ry="9" id={{step.name}} class="shape"/>
      <text class="tLabel" x={{step.x}} y={{step.y}}>
        <tspan class="tsLabel" x={{step.tx}} y={{step.ty}}>{{step.name}}</tspan>
       </text>

       {{#each step.endpoints as |ep|}}
          {{#if ep.counterpart}}
            <path class="connector" d="M {{ep.x}},{{ep.y}} L {{ep.counterpart.x}},{{ep.counterpart.y}}"/>
          {{else}}
            <rect width="10" height="10" x={{rp.x}} y={{ep.y}} rx="9" ry="9" class="shape"/>
          {{/if}}
       {{/each}}
    {{/each}}
    </svg>
  </div>
{{/ui-accordion}}
